require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"resources",'name_ru'=>"География природных ресурсов",'name_ua'=>"Географія природних ресурсів"},{'sign'=>"population",'name_ru'=>"География населения",'name_ua'=>"Географія населення"},{'sign'=>"politics",'name_ru'=>"Политическое устройство мира",'name_ua'=>"Політичний устрій світу"},{'sign'=>"industry",'name_ru'=>"Мировое хозяйство",'name_ua'=>"Світове господарство"},{'sign'=>"economy",'name_ru'=>"Региональная география (экономические карты)",'name_ua'=>"Регіональна географія (економічні карти)"},{'sign'=>"problems",'name_ru'=>"Глобальные проблемы человечества",'name_ua'=>"Глобальні проблеми людства"}].each{|category| Category.create(category) }
      [{'category_sign'=>"resources",'name_ru'=>"Физическая карта мира",'name_ua'=>"Фізична карта світу",'file'=>"1",'summary'=>"01",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Минеральные ресурсы",'name_ua'=>"Мінеральні ресурси",'file'=>"2_Mineralnye_resursy",'summary'=>"13",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Земельные ресурсы",'name_ua'=>"Земельні ресурси",'file'=>"3_Zemelni_resursy",'summary'=>"16",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Агроклиматические ресурсы и типы зимы",'name_ua'=>"Агрокліматичні ресурси і типи зими",'file'=>"4_Agroklimat_res_Tipy_zimy",'summary'=>"19",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Биологические ресурсы",'name_ua'=>"Біологічні ресурси",'file'=>"5_Biolog_resursy",'summary'=>"18",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Ресурсы мирового океана",'name_ua'=>"Ресурси світового океану",'file'=>"6_Resur_mir_okeana",'summary'=>"15",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Водные ресурсы",'name_ua'=>"Водні ресурси",'file'=>"7_Vodnye_resursy",'summary'=>"17",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Топливные и геотермальные ресурсы",'name_ua'=>"Паливні та геотермальні ресурси",'file'=>"8_Toplivnye_resursy",'summary'=>"14",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"resources",'name_ru'=>"Рекреационные ресурсы. Туризм. Направления мирового туризма",'name_ua'=>"Рекреаційні ресурси. Туризм. Напрямки світового туризму",'file'=>"9_Rekreatsionnye_res_Turizm",'summary'=>"20",'pictures_list'=>"r_3",'legend'=>"lMain",'questionnaire'=>"03"},{'category_sign'=>"population",'name_ru'=>"Размещение населения",'name_ua'=>"Розміщення населення",'file'=>"10_Razmeshenie_naseleniya",'summary'=>"06",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Внешние миграции",'name_ua'=>"Зовнішні міграції",'file'=>"Migration",'summary'=>"07_M",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Народы",'name_ua'=>"Народи",'file'=>"11_Narody",'summary'=>"10",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Религии",'name_ua'=>"Релігії",'file'=>"12_Religii",'summary'=>"09",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Продолжительность жизни. Половой состав населения",'name_ua'=>"Тривалість життя. Статевий склад населення",'file'=>"13_Prodolzhit_zhizni_Polovoy_sostav",'summary'=>"08",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Урбанизация. Естественный прирост населения",'name_ua'=>"Урбанізація. Природний приріст населення",'file'=>"14_Urbanizatsiya_Estestv_prirost_nasel",'summary'=>"07",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Занятость населения в сельском, лесном и рыбном хозяйстве. Занятость населения в индустриальных отраслях хозяйства",'name_ua'=>"Зайнятість населення в сільському, лісовому та рибному господарстві. Зайнятість населення в індустріальних галузях господарства",'file'=>"15_Zanyatost_nasel_sel_hoz_industr_otrasl",'summary'=>"11",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ru'=>"Занятость населения в обслуживающих отраслях хозяйства. Безработица",'name_ua'=>"Зайнятість населення в обслуговуючих галузях господарства. Безробіття",'file'=>"16_zanyat_naserl_obsluzh_Bezrabotitsa",'summary'=>"12",'pictures_list'=>"r_2",'legend'=>"lMain",'questionnaire'=>"02"},{'category_sign'=>"politics",'name_ru'=>"Политическая карта мира",'name_ua'=>"Політична карта світу",'file'=>"17_Page_4-5_2007_CD",'summary'=>"02",'pictures_list'=>"r_1",'legend'=>"lMain",'questionnaire'=>"01"},{'category_sign'=>"politics",'name_ru'=>"Уровень социального и экономического развития стран мира",'name_ua'=>"Рівень соціального та економічного розвитку країн світу",'file'=>"18_Uroven_ekon_sots_razv",'summary'=>"04",'pictures_list'=>"r_1",'legend'=>"lMain",'questionnaire'=>"01"},{'category_sign'=>"politics",'name_ru'=>"Государственное устройство",'name_ua'=>"Державний устрій",'file'=>"19_Gosud_ustroystvo",'summary'=>"03",'pictures_list'=>"r_1",'legend'=>"lMain",'questionnaire'=>"01"},{'category_sign'=>"politics",'name_ru'=>"Международные организации",'name_ua'=>"Міжнародні організації",'file'=>"20_Mezhdunar_organizatsii",'summary'=>"05",'pictures_list'=>"r_1",'legend'=>"lMain",'questionnaire'=>"01"},{'category_sign'=>"industry",'name_ru'=>"Нефтяная и газовая промышленность",'name_ua'=>"Нафтова і газова промисловість",'file'=>"21_Neft_gaz_promyshl",'summary'=>"21",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Электроэнергетика",'name_ua'=>"Електроенергетика",'file'=>"Elektroenergetika_new",'summary'=>"23",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Угольная и уранодобывающая промышленность",'name_ua'=>"Вугільна і урановидобувна промисловість",'file'=>"23_Ugolnaya_uranodob_promyshl",'summary'=>"22",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Черная металлургия",'name_ua'=>"Чорна металургія",'file'=>"24_Chernaya_metallurgiya",'summary'=>"24",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Цветная металлургия",'name_ua'=>"Кольорова металургія",'file'=>"tsvetnaya_metallurgiya",'summary'=>"25",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Машиностроение и металлообработка",'name_ua'=>"Машинобудування і металообробка",'file'=>"26_Mashinostroenie_metall",'summary'=>"26",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Химическая промышленность",'name_ua'=>"Хімічна промисловість",'file'=>"27_Himich_promyshlen",'summary'=>"27",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Текстильная промышленность",'name_ua'=>"Текстильна промисловість",'file'=>"28_Tekstilnaya_promyshl",'summary'=>"28",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Сельское хозяйство",'name_ua'=>"Сільське господарство",'file'=>"29_Selskoe_hozyaystvo",'summary'=>"29",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Зерновые культуры. Животноводство",'name_ua'=>"Зернові культури. Тваринництво",'file'=>"30_Zernovye_Zhivotnovod",'summary'=>"30",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Технические (масличные и волокнистые) культуры. Технические (свекличные, клубнеплодные и тонизирующие) культуры",'name_ua'=>"Технічні (олійні та волокнисті) культури. Технічні (бурячного, бульбоплідні і тонізуючі) культури",'file'=>"31_Tehnicheskie kultury",'summary'=>"31",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Транспорт. Сеть международной связи",'name_ua'=>"Транспорт. Мережа міжнародного зв'язку",'file'=>"Transport",'summary'=>"32",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"industry",'name_ru'=>"Международные экономические связи",'name_ua'=>"Міжнародні економічні зв'язки",'file'=>"33_Mezhdun_ekon_svyazi",'summary'=>"33",'pictures_list'=>"r_4",'legend'=>"lMain",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ru'=>"Страны Европы",'name_ua'=>"Країни Європи",'file'=>"Europe",'summary'=>"40",'pictures_list'=>"r_6",'legend'=>"lMain",'questionnaire'=>"06"},{'category_sign'=>"economy",'name_ru'=>"Великобритания, Франция, Италия, Бельгия, Швейцария, Нидерланды, Люксембург",'name_ua'=>"Великобританія, Франція, Італія, Бельгія, Швейцарія, Нідерланди, Люксембург",'file'=>"35_Velykobr_Fr_It_Bel_",'summary'=>"41",'pictures_list'=>"r_6",'legend'=>"lMain",'questionnaire'=>"06"},{'category_sign'=>"economy",'name_ru'=>"Германия, Чехия, Словакия, Польша, Белоруссия, Литва",'name_ua'=>"Німеччина, Чехія, Словаччина, Польща, Білорусь, Литва",'file'=>"36_Germ_Cheh_Slov",'summary'=>"42",'pictures_list'=>"r_6",'legend'=>"lMain",'questionnaire'=>"06"},{'category_sign'=>"economy",'name_ru'=>"Страны Азии",'name_ua'=>"Країни Азії",'file'=>"37_Strany_Azii",'summary'=>"43",'pictures_list'=>"r_7",'legend'=>"lMain",'questionnaire'=>"07"},{'category_sign'=>"economy",'name_ru'=>"Китай, Монголия, Республика Корея, КНДР",'name_ua'=>"Китай, Монголія, Республіка Корея, КНДР",'file'=>"38_Kitay_Mongol_Koreya",'summary'=>"44",'pictures_list'=>"r_7",'legend'=>"lMain",'questionnaire'=>"07"},{'category_sign'=>"economy",'name_ru'=>"Индия, Бангладеш, Непал, Бутан, Япония",'name_ua'=>"Індія, Бангладеш, Непал, Бутан, Японія",'file'=>"39_Ind_Banglad_Nepal_Butan",'summary'=>"45",'pictures_list'=>"r_7",'legend'=>"lMain",'questionnaire'=>"07"},{'category_sign'=>"economy",'name_ru'=>"Канада, Соединенные Штаты Америки",'name_ua'=>"Канада, Сполучені Штати Америки",'file'=>"40_Kanada_USA",'summary'=>"46",'pictures_list'=>"r_8",'legend'=>"lMain",'questionnaire'=>"08"},{'category_sign'=>"economy",'name_ru'=>"Латинская Америка",'name_ua'=>"Латинська Америка",'file'=>"41_Latinskaya_Amerika",'summary'=>"47",'pictures_list'=>"r_8",'legend'=>"lMain",'questionnaire'=>"08"},{'category_sign'=>"economy",'name_ru'=>"Африка",'name_ua'=>"Африка",'file'=>"42_Afrika",'summary'=>"48",'pictures_list'=>"r_9",'legend'=>"lMain",'questionnaire'=>"09"},{'category_sign'=>"economy",'name_ru'=>"Австралия и Океания",'name_ua'=>"Австралія та Океанія",'file'=>"43_Australia_Oceaniya",'summary'=>"49",'pictures_list'=>"r_9",'legend'=>"lMain",'questionnaire'=>"09"},{'category_sign'=>"problems",'name_ru'=>"Политическая напряженность",'name_ua'=>"Політична напруженість",'file'=>"44_Politicheskaya_napryazhennost",'summary'=>"34",'pictures_list'=>"r_5",'legend'=>"lMain",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ru'=>"Калорийность питания. Здравоохранение",'name_ua'=>"Калорійність харчування. Охорона здоров'я",'file'=>"45_Kaloriynost_Zdravoohranenie",'summary'=>"35",'pictures_list'=>"r_5",'legend'=>"lMain",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ru'=>"Экологические проблемы",'name_ua'=>"Екологічні проблеми",'file'=>"46_Ekolog_problemy",'summary'=>"36",'pictures_list'=>"r_5",'legend'=>"lMain",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ru'=>"Охрана природы",'name_ua'=>"Охорона природи",'file'=>"47_Ohrana_prirody",'summary'=>"37",'pictures_list'=>"r_5",'legend'=>"lMain",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ru'=>"Выбросы углекислого газа. Неграмотность",'name_ua'=>"Викиди вуглекислого газу. Неграмотність",'file'=>"48_Vybrosy_uglek_gaza_Negramotnost",'summary'=>"38",'pictures_list'=>"r_5",'legend'=>"lMain",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ru'=>"Образование и наука",'name_ua'=>"Освіта та наука",'file'=>"49_Obrazovanie_Nauka",'summary'=>"39",'pictures_list'=>"r_5",'legend'=>"lMain",'questionnaire'=>"05"}].each{|map| Map.create(map) }
    end
    if Bill.find(:all).size == 0
      code = (0...6).map{(65 + rand(26)).chr }.join
      token =  (0...32).map.with_index{|i| ('a'..'z').to_a.concat(('0'..'9').to_a)[rand(36)] }.join
      Bill.create({'code' => code, 'token' => token, 'paid' => 0})
    end
    if Control.find(:all).size == 0
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ru'
      Control.create({'name' => 'lang', 'value' => default_lang, 'type' => 'select', 'values_str' => '["ru","ua"]'})
      Control.create({'name' => 'icon_size', 'value' => 'normal', 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
