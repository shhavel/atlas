require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"general",'name_ua'=>"ЗАГАЛЬНИЙ РОЗДІЛ",'name_en'=>"GENERAL SECTION",'name_ru'=>"ОБЩИЙ РАЗДЕЛ",},{'sign'=>"conditions",'name_ua'=>"ПРИРОДНІ УМОВИ ТА ПРИРОДНІ РЕСУРСИ",'name_en'=>"NATURAL CONDITIONS AND NATURAL RESOURCES",'name_ru'=>"ПРИРОДНЫЕ УСЛОВИЯ И ПРИРОДНЫЕ РЕСУРСЫ",},{'sign'=>"landscapes",'name_ua'=>"ЛАНДШАФТИ І ФІЗИКО-ГЕОГРАФІЧНЕ РАЙОНУВАННЯ",'name_en'=>"LANDSCAPE AND THE PHYSICAL AND GEOGRAPHIC ZONE",'name_ru'=>"ЛАНДШАФТЫ И ФИЗИКО-ГЕОГРАФИЧЕСКОЕ РАЙОНИРОВАНИЕ",},{'sign'=>"resources",'name_ua'=>"ВИКОРИСТАННЯ ПРИРОДНИХ УМОВ І ПРИРОДНИХ РЕСУРСІВ ТА ЇХ ОХОРОНА",'name_en'=>"USE OF NATURAL ENVIRONMENT AND NATURAL RESOURCES AND THEIR PROTECTION",'name_ru'=>"ИСПОЛЬЗОВАНИЕ ПРИРОДНЫХ УСЛОВИЙ И ПРИРОДНЫХ РЕСУРСОВ И ИХ ОХРАНА",}].each{|category| Category.create(category) }
      [{'category_sign'=>"general",'name_ua'=>"Годинні пояси світу",'name_en'=>"Timezones of the world",'name_ru'=>"Часовые пояса мира",'file'=>"01",'summary'=>"01",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Українська козацька держава у XVII-XVIII ст.",'name_en'=>"Ukrainian Cossack state in XVII-XVIII centuries.",'name_ru'=>"Украинское казацкое государство в XVII-XVIII вв.",'file'=>"02(1)",'summary'=>"01",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Відновлення української державності у 1917-1920 рр.",'name_en'=>"Restoration of Ukrainian statehood in 1917-1920.",'name_ru'=>"Восстановление украинской государственности в 1917-1920 гг",'file'=>"02(2)",'summary'=>"01",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Формування території України у складі Радянського Союзу (1921-1991 рр.)",'name_en'=>"Formation of the Ukraine in the Soviet Union (1921-1991 gg.)",'name_ru'=>"Формирование территории Украины в составе Советского Союза (1921-1991 гг)",'file'=>"02(3)",'summary'=>"01",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Україна на карті Європи",'name_en'=>"Ukraine on the European map",'name_ru'=>"Украина на карте Европы",'file'=>"02(4)",'summary'=>"02",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Україна та найбільші європейські держави",'name_en'=>"Ukraine and the largest European countries",'name_ru'=>"Украина и крупнейшие европейские государства",'file'=>"02(5)",'summary'=>"02",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Географічні відомості про українські землі",'name_en'=>"Geographical information about the Ukrainian lands",'name_ru'=>"Географические сведения о украинские земли",'file'=>"02(6)",'summary'=>"02",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Україна на стародавніх картах",'name_en'=>"Ukraine on ancient maps",'name_ru'=>"Украина на старинных картах",'file'=>"02(7)",'summary'=>"03",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Адміністративно-територіальний поділ",'name_en'=>"Subdivisions",'name_ru'=>"Административно-территориальное деление",'file'=>"03",'summary'=>"03",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Картографічні проекції",'name_en'=>"Cartographic projection",'name_ru'=>"Картографические проекции",'file'=>"04",'summary'=>"04",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"general",'name_ua'=>"Фрагмент аркуша топографічної карти",'name_en'=>"A fragment of topographic map sheet",'name_ru'=>"Фрагмент листа топографической карты",'file'=>"05",'summary'=>"05",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"conditions",'name_ua'=>"Фізична поверхня",'name_en'=>"Physical surface",'name_ru'=>"Физическая поверхность",'file'=>"06(1)",'summary'=>"06",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Фізична карта",'name_en'=>"Physical map",'name_ru'=>"Физическая карта",'file'=>"06(2)",'summary'=>"06",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Геологічна будова",'name_en'=>"Geological structure",'name_ru'=>"Геологическое строение",'file'=>"07",'summary'=>"07",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Тектонічна будова",'name_en'=>"Tectonic structure",'name_ru'=>"Тектоническое строение",'file'=>"08",'summary'=>"08",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Розподіл суходолу та моря в різні геологічні періоди",'name_en'=>"The distribution of land and sea in different geological periods",'name_ru'=>"Распределение суши и моря в различные геологические периоды",'file'=>"09",'summary'=>"09",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Четвертинні відклади",'name_en'=>"Quaternary deposits",'name_ru'=>"Четвертичные отложения",'file'=>"10",'summary'=>"10",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Несприятливі природні процеси",'name_en'=>"Adverse natural processes",'name_ru'=>"Неблагоприятные природные процессы",'file'=>"11",'summary'=>"11",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Геоморфологічна будова",'name_en'=>"Geomorphological structure",'name_ru'=>"Геоморфологическая строение",'file'=>"12",'summary'=>"12",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Корисні копалини",'name_en'=>"Minerals",'name_ru'=>"Полезные ископаемые",'file'=>"13",'summary'=>"13",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Кліматична карта України. Синоптична карта Європи",'name_en'=>"Climate map of Ukraine. Weather map of Europe",'name_ru'=>"Климатическая карта Украины. Синоптическая карта Европы",'file'=>"14",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Сонячна радіація. Атмосферний тиск",'name_en'=>"Solar radiation. Atmospheric pressure",'name_ru'=>"Солнечная радиация. Атмосферное давление",'file'=>"15_1",'summary'=>"14",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Температура повітря. Синоптичні карти",'name_en'=>"Temperature. Weather map",'name_ru'=>"Температура воздуха. Синоптические карты",'file'=>"15_2",'summary'=>"16",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Грози. Град",'name_en'=>"Thunderstorm. Hail",'name_ru'=>"Грозы. Град",'file'=>"15_3",'summary'=>"14",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Агрокліматичне районування",'name_en'=>"Agroclimatic zoning",'name_ru'=>"Агроклиматическое районирования",'file'=>"15_4",'summary'=>"15",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Поверхневі води",'name_en'=>"Surface water",'name_ru'=>"Поверхностные воды",'file'=>"16",'summary'=>"17",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Підземні води",'name_en'=>"Groundwater",'name_ru'=>"Подземные воды",'file'=>"17",'summary'=>"18",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Водні ресурси",'name_en'=>"Water resources",'name_ru'=>"Водные ресурсы",'file'=>"18",'summary'=>"19",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Ґрунти",'name_en'=>"Soils",'name_ru'=>"Почвы",'file'=>"19",'summary'=>"20",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Рослинність",'name_en'=>"Vegetation",'name_ru'=>"Растительность",'file'=>"20",'summary'=>"21",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"conditions",'name_ua'=>"Тваринний світ",'name_en'=>"Animal World",'name_ru'=>"Животный мир",'file'=>"21",'summary'=>"22",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"landscapes",'name_ua'=>"Ландшафти",'name_en'=>"Landscapes",'name_ru'=>"Ландшафты",'file'=>"22",'summary'=>"23",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"landscapes",'name_ua'=>"Фізико-географічне районування",'name_en'=>"Geographical zoning",'name_ru'=>"Физико-географическое районирование",'file'=>"23",'summary'=>"24",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"landscapes",'name_ua'=>"Чорне та Азовське моря",'name_en'=>"Black and Azov Seas",'name_ru'=>"Черное и Азовское моря",'file'=>"30",'summary'=>"25",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"landscapes",'name_ua'=>"Основні характеристики води Чорного й Азовського морів",'name_en'=>"Key Features of Black and Azov Seas",'name_ru'=>"Основные характеристики воды Черного и Азовского морей",'file'=>"25",'summary'=>"26",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"landscapes",'name_ua'=>"Українські Карпати. Кримські гори",'name_en'=>"Ukrainian Carpathians. Crimean mountains",'name_ru'=>"Украинские Карпаты. Крымские горы",'file'=>"26",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"resources",'name_ua'=>"Забруднення атмосферного повітря і радіаційне забруднення",'name_en'=>"Air pollution and radioactive contamination",'name_ru'=>"Загрязнение атмосферного воздуха и радиационного загрязнения",'file'=>"27",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"resources",'name_ua'=>"Геоекологічна ситуація",'name_en'=>"Geoecological situation",'name_ru'=>"Геоэкологическая ситуация",'file'=>"28",'summary'=>"27",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"resources",'name_ua'=>"Охорона природи",'name_en'=>"Conservation",'name_ru'=>"Охрана природы",'file'=>"29",'summary'=>"28",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
