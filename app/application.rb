require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"french_revolution",'name_ua'=>"Французька революція кінця XVIII ст.",'name_en'=>"The French Revolution of the late XVIII century",'name_ru'=>"Французская революция конца XVIII в."},{'sign'=>"napoleon",'name_ua'=>"Правління Наполеона Бонапарта. Перша імперія у Франції",'name_en'=>"Board Napoleon Bonaparte. First Empire in France",'name_ru'=>"Правление Наполеона Бонапарта. Первая империя во Франции"},{'sign'=>"countries_of_europe",'name_ua'=>"Країни Європи у 1815–1847 рр.",'name_en'=>"European countries in 1815-1847",'name_ru'=>"Страны Европы в 1815-1847 гг"},{'sign'=>"revolution_in_europe",'name_ua'=>"Революції 1848–1849 рр. у Європі",'name_en'=>"Revolution in Europe 1848-1849",'name_ru'=>"Революции 1848-1849 гг в Европе"},{'sign'=>"italy_and_germany",'name_ua'=>"Утворення національних держав в Італії та Німеччині. Центральна Європа в 1860–1870-ті роки",'name_en'=>"Formation of nation-states in Italy and Germany. Central Europe in 1860-1870 years",'name_ru'=>"Образование национальных государств в Италии и Германии. Центральная Европа в 1860-1870-е годы"},{'sign'=>"international_relations_19",'name_ua'=>"Міжнародні відносини у 1840–1860-их роках",'name_en'=>"International Relations in 1840-1860's",'name_ru'=>"Международные отношения в 1840-1860-х годах"},{'sign'=>"usa",'name_ua'=>"США у першій половині XIX ст. Громадянська війна (1861–1865 рр.)",'name_en'=>"US in the first half of the XIX century. Civil War (1861-1865)",'name_ru'=>"США в первой половине XIX в. Гражданская война (1861-1865 гг)"},{'sign'=>"russian_empire_19",'name_ua'=>"Російська імперія в XIX ст.",'name_en'=>"Russian Empire in the XIX century",'name_ru'=>"Российская империя в XIX в."},{'sign'=>"international_relations_20",'name_ua'=>"Міжнародні відносини наприкінці XIX ст. – на початку XX ст.",'name_en'=>"International relations in late XIX century - Early XX century",'name_ru'=>"Международные отношения в конце XIX в. - В начале XX ст."},{'sign'=>"america",'name_ua'=>"Країни Америки наприкінці XIX – на початку XX ст.",'name_en'=>"The Americas in the late XIX - early XX century",'name_ru'=>"Страны Америки в конце XIX - начале XX в."},{'sign'=>"russian_empire_20",'name_ua'=>"Російська імперія наприкінці XIX – на початку XX ст.",'name_en'=>"Russian Empire in the late XIX - early XX century",'name_ru'=>"Российская империя в конце XIX - начале XX в."},{'sign'=>"asia",'name_ua'=>"Країни Азії наприкінці XIX ст. – на початку XX ст.",'name_en'=>"Asia in the late XIX century - Early XX century",'name_ru'=>"Страны Азии в конце XIX в. - В начале XX ст."}].each{|category| Category.create(category) }
      [{'category_sign'=>"french_revolution",'name_ua'=>"Французька революція кінця XVIII ст. Війни Франції у період директорії та консульства",'name_en'=>"The French Revolution of the late XVIII century War between France and consulates directory",'name_ru'=>"Французская революция конца XVIII в. Войны Франции в период директории и консульства",'file'=>"1",'summary'=>"1",'legend'=>"Main",'pictures_list'=>"1",'questionnaire'=>"1"},{'category_sign'=>"napoleon",'name_ua'=>"Війни наполеонівської Франції",'name_en'=>"War with Napoleonic France",'name_ru'=>"Войны наполеоновской Франции",'file'=>"2",'summary'=>"2",'legend'=>"Main",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"countries_of_europe",'name_ua'=>"Країни Європи у 1815–1847 роках",'name_en'=>"European countries in the years 1815-1847",'name_ru'=>"Страны Европы в 1815-1847 годах",'file'=>"3",'summary'=>"3",'legend'=>"Main",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"revolution_in_europe",'name_ua'=>"Революції 1848–1849 років у Європі",'name_en'=>"Revolution of 1848-1849 in Europe",'name_ru'=>"Революции 1848-1849 годов в Европе",'file'=>"4",'summary'=>"4",'legend'=>"Main",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"italy_and_germany",'name_ua'=>"Утворення національних держав в Італії та Німеччині. Центральна Європа в 1860–1870-ті роки",'name_en'=>"Formation of nation-states in Italy and Germany. Central Europe in 1860-1870 years",'name_ru'=>"Образование национальных государств в Италии и Германии. Центральная Европа в 1860-1870-е годы",'file'=>"5",'summary'=>"5",'legend'=>"Main",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"international_relations_19",'name_ua'=>"Світ у 1840–1860-их роках. Утворення незалежних держав у Латинській Америці",'name_en'=>"World in 1840-1860's. The formation of independent states in Latin America",'name_ru'=>"Мир в 1840-1860-х годах. Образование независимых государств в Латинской Америке",'file'=>"6-7",'summary'=>"6",'legend'=>"Main",'pictures_list'=>"6",'questionnaire'=>"6"},{'category_sign'=>"usa",'name_ua'=>"Громадянська війна у США (1861–1865 рр.). Зростання території США",'name_en'=>"American Civil War (1861-1865). Growth in the US",'name_ru'=>"Гражданская война в США (1861-1865 гг.) Рост территории США",'file'=>"8",'summary'=>"7",'legend'=>"Main",'pictures_list'=>"7",'questionnaire'=>"7"},{'category_sign'=>"russian_empire_19",'name_ua'=>"Російська імперія у XIX ст. Російська експансія на Кавказі",'name_en'=>"Russian Empire in the XIX century Russian expansion in the Caucasus",'name_ru'=>"Российская империя в XIX в. Российская экспансия на Кавказе",'file'=>"9",'summary'=>"8",'legend'=>"Main",'pictures_list'=>"8",'questionnaire'=>"8"},{'category_sign'=>"international_relations_20",'name_ua'=>"Країни Європи у другій половині XIX – на початку XX ст.",'name_en'=>"European countries in the second half of XIX - early XX century",'name_ru'=>"Страны Европы во второй половине XIX - начале XX в.",'file'=>"10",'summary'=>"9",'legend'=>"Main",'pictures_list'=>"9",'questionnaire'=>"9"},{'category_sign'=>"international_relations_20",'name_ua'=>"Світ у 1879–1914 роках. Англо-Бурська війна 1899–1902 рр.",'name_en'=>"The World in 1879-1914, respectively. Anglo-Boer War of 1899-1902.",'name_ru'=>"Мир в 1879-1914 годах. Англо-бурской войны 1899-1902 гг",'file'=>"14-15",'summary'=>"9",'legend'=>"Main",'pictures_list'=>"9",'questionnaire'=>"9"},{'category_sign'=>"america",'name_ua'=>"Країни Латинської Америки наприкінці XIX – на початку XX ст.",'name_en'=>"Latin America in the late XIX - early XX century",'name_ru'=>"Страны Латинской Америки в конце XIX - начале XX в.",'file'=>"11",'summary'=>"10",'legend'=>"Main",'pictures_list'=>"10",'questionnaire'=>"10"},{'category_sign'=>"russian_empire_20",'name_ua'=>"Російська імперія на початку XX ст. Азійська частина Росії",'name_en'=>"Russian Empire in the early XX century. The Asian part of Russia",'name_ru'=>"Российская империя в начале XX в. Азиатская часть России",'file'=>"16",'summary'=>"11",'legend'=>"Main",'pictures_list'=>"11",'questionnaire'=>"11"},{'category_sign'=>"asia",'name_ua'=>"Країни Південної та Східної Азії наприкінці XIX – на початку XX ст.",'name_en'=>"South and East Asia in the late XIX - early XX century",'name_ru'=>"Страны Южной и Восточной Азии в конце XIX - начале XX в.",'file'=>"12",'summary'=>"12",'legend'=>"Main",'pictures_list'=>"12",'questionnaire'=>"12"},{'category_sign'=>"asia",'name_ua'=>"Країни Близького і Середнього Сходу наприкінці XIX – на початку XX ст. Балканські війни 1912–1913 років",'name_en'=>"Countries of the Middle East in late XIX - early XX century. The Balkan Wars 1912-1913 years",'name_ru'=>"Страны Ближнего и Среднего Востока в конце XIX - начале XX в. Балканские войны 1912-1913 годов",'file'=>"13",'summary'=>"12",'legend'=>"Main",'pictures_list'=>"12",'questionnaire'=>"12"}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
