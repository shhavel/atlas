require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"medieval",'name_ua'=>"Народження середньовічної Європи",'name_en'=>"Birth of Medieval Europe",'name_ru'=>"Рождение средневековой Европы"},{'sign'=>"countries",'name_ua'=>"Європейські країни в X-XIII ст.",'name_en'=>"European countries in the X-XIII centuries.",'name_ru'=>"Европейские страны в X-XIII вв."},{'sign'=>"struggle",'name_ua'=>"Боротьба народів Європи та Азії проти чужоземних загарбників",'name_en'=>"The struggle of the peoples of Europe and Asia against foreign invaders",'name_ru'=>"Борьба народов Европы и Азии против чужеземных захватчиков"},{'sign'=>"society",'name_ua'=>"Середньовічне суспільство",'name_en'=>"Medieval Society",'name_ru'=>"Средневековое общество"},{'sign'=>"spiritual",'name_ua'=>"Європа в XIV-XV ст. Духовний світ людини середньовіччя",'name_en'=>"Europe in XIV-XV centuries. The spiritual world of medieval",'name_ru'=>"Европа в XIV-XV вв. Духовный мир человека средневековья"},{'sign'=>"asia",'name_ua'=>"Утворення Московської держави. Країни Азії",'name_en'=>"Formation of Muscovy. Asia",'name_ru'=>"Образование Московского государства. Страны Азии"}].each{|category| Category.create(category) }
      [{'category_sign'=>"medieval",'name_ua'=>"Початок Великого переселення народів. Загибель Західної Римської імперії",'name_en'=>"Beginning of the Great Migration. The death of the Roman Empire",'name_ru'=>"Начало Великого переселения народов. Гибель Западной Римской империи",'file'=>"01",'summary'=>"01",'pictures_list'=>"01",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Виникнення варварських королівств",'name_en'=>"The emergence of the barbarian kingdoms",'name_ru'=>"Возникновение варварских королевств",'file'=>"02_1",'summary'=>"02",'pictures_list'=>"02",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Виникнення ісламу та Арабський халіфат",'name_en'=>"The emergence of Islam and the Arab Caliphate",'name_ru'=>"Возникновение ислама и Арабский халифат",'file'=>"06",'summary'=>"03",'pictures_list'=>"03",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Європа у другій половині VI ст. Візантія за Юстиніана",'name_en'=>"Europe in the second half of VI. Byzantium under Justinian",'name_ru'=>"Европа во второй половине VI в. Византия по Юстиниана",'file'=>"02_2",'summary'=>"04",'pictures_list'=>"04",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Візантія і слов'яни в VII-IX ст.",'name_en'=>"Byzantium and the Slavs in VII-IX centuries.",'name_ru'=>"Византия и славяне в VII-IX вв.",'file'=>"04",'summary'=>"04",'pictures_list'=>"04",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Візантія і слов'яни в X-XI ст.",'name_en'=>"Byzantium and the Slavs in X-XI centuries.",'name_ru'=>"Византия и славяне в X-XI вв.",'file'=>"05",'summary'=>"04",'pictures_list'=>"04",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Франкська імперія",'name_en'=>"Frankish Empire",'name_ru'=>"Франкское империя",'file'=>"03",'summary'=>"05",'pictures_list'=>"05",'questionnaire'=>"01"},{'category_sign'=>"medieval",'name_ua'=>"Епоха вікінгів (VІІІ–ХІ ст.)",'name_en'=>"Viking Age (VIII-XI).",'name_ru'=>"Эпоха викингов (VIII-XI вв.)",'file'=>"07",'summary'=>"06",'pictures_list'=>"06",'questionnaire'=>"01"},{'category_sign'=>"countries",'name_ua'=>"Німеччина в Х–ХІІІ ст.",'name_en'=>"Germany in the X-XIII.",'name_ru'=>"Германия в Х-ХIII вв.",'file'=>"14",'summary'=>"07",'pictures_list'=>"07",'questionnaire'=>"02"},{'category_sign'=>"countries",'name_ua'=>"Центральна та Східна Європа ІХ–ХІ ст.",'name_en'=>"Central and Eastern Europe IX-XI.",'name_ru'=>"Центральная и Восточная Европа IX-XI вв.",'file'=>"05",'summary'=>"08",'pictures_list'=>"08",'questionnaire'=>"02"},{'category_sign'=>"countries",'name_ua'=>"Хрестові походи 1096-1192 рр.",'name_en'=>"The Crusades 1096-1192",'name_ru'=>"Крестовые походы 1096-1192 гг",'file'=>"08",'summary'=>"09",'pictures_list'=>"09",'questionnaire'=>"02"},{'category_sign'=>"countries",'name_ua'=>"Хрестові походи 1202-1291 рр.",'name_en'=>"The Crusades 1202-1291",'name_ru'=>"Крестовые походы 1202-1291 гг",'file'=>"09_1",'summary'=>"09",'pictures_list'=>"09",'questionnaire'=>"02"},{'category_sign'=>"countries",'name_ua'=>"Англія в ХІ – на початку ХІV ст.",'name_en'=>"England in the XI - beginning of the fourteenth century.",'name_ru'=>"Англия в XI - начале XIV в.",'file'=>"12_13_A",'summary'=>"10",'pictures_list'=>"10",'questionnaire'=>"02"},{'category_sign'=>"countries",'name_ua'=>"Франція в ХІ–ХІІІ ст.",'name_en'=>"France in the eleventh to thirteenth centuries.",'name_ru'=>"Франция в XI-XIII вв.",'file'=>"12_13_A",'summary'=>"11",'pictures_list'=>"11",'questionnaire'=>"02"},{'category_sign'=>"struggle",'name_ua'=>"Північно-Східна Русь",'name_en'=>"North-Eastern",'name_ru'=>"Северо-Восточная Русь",'file'=>"18",'summary'=>"12",'pictures_list'=>"12",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Економічний розвтиток країн Європи та Близького Сходу в XIII-XV ст.",'name_en'=>"Economic rozvtytok Europe and the Middle East in the XIII-XV centuries.",'name_ru'=>"Экономический розвтиток стран Европы и Ближнего Востока в XIII-XV вв.",'file'=>"10_11",'summary'=>"13",'pictures_list'=>"13",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Німеччина та Італія в XI-XIII ст. Монгольська навала на Центральну Європу",'name_en'=>"Germany and Italy in the XI-XIII centuries. Mongol invasion of Central Europe",'name_ru'=>"Германия и Италия в XI-XIII вв. Монгольское нашествие на Центральную Европу",'file'=>"14",'summary'=>"13",'pictures_list'=>"13",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Руські князівства в XII-XIII ст. Монгольська навала",'name_en'=>"Ruthenian principality in XII-XIII centuries. Mongol invasion",'name_ru'=>"Русские княжества в XII-XIII вв. Монгольское нашествие",'file'=>"18",'summary'=>"13",'pictures_list'=>"13",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Англія і Франція у XII - на початку XIV ст. Держави Піренейського півострова у VIII-XIII ст. Реконкіста",'name_en'=>"Britain and France in the XII - at the beginning of the XIV century. State of the Iberian Peninsula during the VIII-XIII centuries. Reconquista",'name_ru'=>"Англия и Франция в XII - начале XIV в. Государства Пиренейского полуострова в VIII-XIII вв. Реконкиста",'file'=>"12_13_A",'summary'=>"13",'pictures_list'=>"13",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Хрестові походи 1096-1291 рр.",'name_en'=>"The Crusades 1096-1291",'name_ru'=>"Крестовые походы 1096-1291 гг",'file'=>"09_1",'summary'=>"14",'pictures_list'=>"14",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Турецькі завоювання та утворення Османської імперії (XIV-XV ст.)",'name_en'=>"Turkish conquest and the formation of the Ottoman Empire (XIV-XV centuries.)",'name_ru'=>"Турецкие завоевания и образования Османской империи (XIV-XV вв.)",'file'=>"17_2",'summary'=>"14",'pictures_list'=>"14",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Країни Азії у XIII-XV ст. Монгольські завоювання. Держави Чингісидів",'name_en'=>"Asia in the XIII-XV centuries. Mongol conquest. State Chynhisydiv",'name_ru'=>"Страны Азии в XIII-XV вв. Монгольские завоевания. Государства Чингисидов",'file'=>"20_2",'summary'=>"15",'pictures_list'=>"15",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Руські князівства в XII-XIII ст. Монгольська навала",'name_en'=>"Ruthenian principality in XII-XIII centuries. Mongol invasion",'name_ru'=>"Русские княжества в XII-XIII вв. Монгольское нашествие",'file'=>"18",'summary'=>"15",'pictures_list'=>"15",'questionnaire'=>"03"},{'category_sign'=>"struggle",'name_ua'=>"Німеччина та Італія в XI-XIII ст. Монгольська навала на Центральну Європу",'name_en'=>"Germany and Italy in the XI-XIII centuries. Mongol invasion of Central Europe",'name_ru'=>"Германия и Италия в XI-XIII вв. Монгольское нашествие на Центральную Европу",'file'=>"14",'summary'=>"15",'pictures_list'=>"15",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Селяни і феодали в ХІ–ХІІІ ст.",'name_en'=>"Peasants and nobles in the eleventh to thirteenth centuries.",'name_ru'=>"Крестьяне и феодалы в ХI-ХIII вв.",'file'=>"10_11",'summary'=>"16",'pictures_list'=>"16",'questionnaire'=>"04"},{'category_sign'=>"society",'name_ua'=>"Середньовічне місто",'name_en'=>"The medieval city",'name_ru'=>"Средневековый город",'file'=>"10_11",'summary'=>"17",'pictures_list'=>"17",'questionnaire'=>"04"},{'category_sign'=>"spiritual",'name_ua'=>"Столітня війна 1337-1453 рр.",'name_en'=>"Hundred Years War 1337-1453",'name_ru'=>"Столетняя война 1337-1453 гг",'file'=>"12_13_B",'summary'=>"18_1",'pictures_list'=>"18_1",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Англія, Франція та держави Піренейського півострова у другій половині XV ст.",'name_en'=>"England, France and the state of the Iberian Peninsula during the second half of XV century.",'name_ru'=>"Англия, Франция и государства Пиренейского полуострова во второй половине XV в.",'file'=>"12_13_C",'summary'=>"18_2",'pictures_list'=>"18_2",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Італія в ХІV–ХV ст.",'name_en'=>"Italy in the fourteenth and fifteenth centuries.",'name_ru'=>"Италия в ХIV-ХV вв.",'file'=>"15",'summary'=>"19",'pictures_list'=>"19",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Англія і Франція у XII - на початку XIV ст. Держави Піренейського півострова у VIII-XIII ст. Реконкіста",'name_en'=>"Britain and France in the XII - at the beginning of the XIV century. State of the Iberian Peninsula during the VIII-XIII centuries. Reconquista",'name_ru'=>"Англия и Франция в XII - начале XIV в. Государства Пиренейского полуострова в VIII-XIII вв. Реконкиста",'file'=>"12_13_A",'summary'=>"20",'pictures_list'=>"20",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Англія, Франція та держави Піренейського півострова у другій половині XV ст.",'name_en'=>"England, France and the state of the Iberian Peninsula during the second half of XV century.",'name_ru'=>"Англия, Франция и государства Пиренейского полуострова во второй половине XV в.",'file'=>"12_13_C",'summary'=>"20",'pictures_list'=>"20",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Загибель Візантії та поява Османської імперії",'name_en'=>"The death of the Byzantine Empire and the emergence of the Ottoman Empire",'name_ru'=>"Гибель Византии и появление Османской империи",'file'=>"17_2",'summary'=>"21",'pictures_list'=>"21",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Німеччина і країни Північної Європи в ХІV–ХV ст.",'name_en'=>"Germany and Northern Europe in the fourteenth and fifteenth centuries.",'name_ru'=>"Германия и страны Северной Европы в ХIV-ХV вв.",'file'=>"15",'summary'=>"22",'pictures_list'=>"22",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Гуситський рух",'name_en'=>"Hussites",'name_ru'=>"Гуситы",'file'=>"17_1",'summary'=>"23",'pictures_list'=>"23",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Польське королівство і Велике князівство Литовське",'name_en'=>"Polish Kingdom and the Grand Duchy of Lithuania",'name_ru'=>"Польское королевство и Великое княжество Литовское",'file'=>"16",'summary'=>"24",'pictures_list'=>"24",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Економічний розвтиток країн Європи та Близького Сходу в XIII-XV ст.",'name_en'=>"Economic rozvtytok Europe and the Middle East in the XIII-XV centuries.",'name_ru'=>"Экономический розвтиток стран Европы и Ближнего Востока в XIII-XV вв.",'file'=>"10_11",'summary'=>"25",'pictures_list'=>"25",'questionnaire'=>"05"},{'category_sign'=>"spiritual",'name_ua'=>"Християнська церква в Європі VI-XIII ст.",'name_en'=>"Christian Church in Europe VI-XIII centuries.",'name_ru'=>"Христианская церковь в Европе VI-XIII вв.",'file'=>"09_2",'summary'=>"25",'pictures_list'=>"25",'questionnaire'=>"05"},{'category_sign'=>"asia",'name_ua'=>"Початок об’єднання земель Північно-Східної Русі навколо Москви",'name_en'=>"Getting the land consolidation Northeast around Moscow",'name_ru'=>"Начало объединения земель Северо-Восточной Руси вокруг Москвы",'file'=>"19",'summary'=>"26",'pictures_list'=>"26",'questionnaire'=>"06"},{'category_sign'=>"asia",'name_ua'=>"Держава Івана ІІІ",'name_en'=>"State of Ivan III",'name_ru'=>"Государство Ивана ІІІ",'file'=>"19",'summary'=>"27",'pictures_list'=>"27",'questionnaire'=>"06"},{'category_sign'=>"asia",'name_ua'=>"Середньовічний Китай",'name_en'=>"Medieval China",'name_ru'=>"Средневековый Китай",'file'=>"20",'summary'=>"28",'pictures_list'=>"28",'questionnaire'=>"06"},{'category_sign'=>"asia",'name_ua'=>"Середньовічна Японія",'name_en'=>"Medieval Japan",'name_ru'=>"Средневековая Япония",'file'=>"20_2",'summary'=>"29",'pictures_list'=>"29",'questionnaire'=>"06"},{'category_sign'=>"asia",'name_ua'=>"Середньовічна Індія",'name_en'=>"Medieval India",'name_ru'=>"Средневековая Индия",'file'=>"20",'summary'=>"30",'pictures_list'=>"30",'questionnaire'=>"06"}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
