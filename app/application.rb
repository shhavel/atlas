require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"political",'name_ua'=>"ПОЛІТИЧНА ТА ФІЗИЧНА КАРТА СВІТУ",'name_ru'=>"ПОЛИТИЧЕСКАЯ И ФИЗИЧЕСКАЯ КАРТА МИРА"},{'sign'=>"population",'name_ua'=>"НАСЕЛЕННЯ СВІТУ",'name_ru'=>"НАСЕЛЕНИЕ МИРА"},{'sign'=>"society",'name_ua'=>"ВЗАЄМОДІЯ СУСПІЛЬСТВА І ПРИРОДИ.",'name_ru'=>"ВЗАИМОДЕЙСТВИЕ ОБЩЕСТВА И ПРИРОДЫ."},{'sign'=>"economy",'name_ua'=>"СВІТОВЕ ГОСПОДАРСТВО",'name_ru'=>"МИРОВОЕ ХОЗЯЙСТВО"},{'sign'=>"problems",'name_ua'=>"ГЛОБАЛЬНІ ПРОБЛЕМИ ЛЮДСТВА",'name_ru'=>"ГЛОБАЛЬНЫЕ ПРОБЛЕМЫ ЧЕЛОВЕЧЕСТВА"},{'sign'=>"economic_maps",'name_ua'=>"ЕКОНОМІЧНІ КАРТИ",'name_ru'=>"ЭКОНОМИЧЕСКИЕ КАРТЫ"}].each{|category| Category.create(category) }
      [{'category_sign'=>"political",'name_ua'=>"Політична карта світу",'name_ru'=>"Политическая карта мира",'file'=>"3",'summary'=>"b_3",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"01"},{'category_sign'=>"political",'name_ua'=>"Державний устрій",'name_ru'=>"Государственное устройство",'file'=>"4",'summary'=>"b_4",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"01"},{'category_sign'=>"political",'name_ua'=>"Рівень економічного та соціального розвитку країн світу",'name_ru'=>"Уровень экономического и социального развития стран мира",'file'=>"5",'summary'=>"b_5",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"01"},{'category_sign'=>"political",'name_ua'=>"Міжнародні організації",'name_ru'=>"Международные организации",'file'=>"6",'summary'=>"b_6",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"01"},{'category_sign'=>"political",'name_ua'=>"Україна на карті Європи",'name_ru'=>"Украина на карте Европы",'file'=>"1",'summary'=>"b_1",'legend'=>"Main"},{'category_sign'=>"political",'name_ua'=>"Фізична карта світу",'name_ru'=>"Физическая карта мира",'file'=>"2",'summary'=>"b_2",'legend'=>"Main"},{'category_sign'=>"population",'name_ua'=>"Розміщення населення",'name_ru'=>"Размещение населения",'file'=>"7",'summary'=>"b_7",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Урбанізація. Тривалість життя",'name_ru'=>"Урбанизация. Продолжительность жизни",'file'=>"8",'summary'=>"b_8",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Природний приріст населення. Склад населення за статтю",'name_ru'=>"Естественный прирост населения. Состав населения по полу",'file'=>"9",'summary'=>"b_9",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Зовнішні міграції",'name_ru'=>"Внешние миграции",'file'=>"10",'summary'=>"b_10",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Релігії",'name_ru'=>"Религии",'file'=>"11",'summary'=>"b_11",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Народи",'name_ru'=>"Народы",'file'=>"12",'summary'=>"b_12",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Зайнятість населення в сільському, лісовому, рибному та індустріальних галузях господарства",'name_ru'=>"Занятость населения в сельском, лесном, рыбном и индустриальных отраслях хозяйства",'file'=>"13",'summary'=>"b_13",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"population",'name_ua'=>"Зайнятість населення в обслуговуючих галузях господарства. Безробіття",'name_ru'=>"Занятость населения в обслуживающих отраслях хозяйства. Безработица",'file'=>"14",'summary'=>"b_14",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"02"},{'category_sign'=>"society",'name_ua'=>"Мінеральні ресурси",'name_ru'=>"Минеральные ресурсы",'file'=>"15",'summary'=>"b_15",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Паливні та геотермальні ресурси",'name_ru'=>"Топливные и геотермальные ресурсы",'file'=>"16",'summary'=>"b_16",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Ресурси світового океану",'name_ru'=>"Ресурсы мирового океана",'file'=>"17",'summary'=>"b_17",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Земельні ресурси",'name_ru'=>"Земельные ресурсы",'file'=>"18",'summary'=>"b_18",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Водні ресурси",'name_ru'=>"Водные ресурсы",'file'=>"19",'summary'=>"b_19",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Біологічні ресурси",'name_ru'=>"Биологические ресурсы",'file'=>"20",'summary'=>"b_20",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Агрокліматичні ресурси. Типи зими",'name_ru'=>"Агроклиматические ресурсы. Типы зимы",'file'=>"21",'summary'=>"b_21",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"society",'name_ua'=>"Рекреаційні ресурси. Туризм. Напрямки світового туризму",'name_ru'=>"Рекреационные ресурсы. Туризм. Направления мирового туризма",'file'=>"22",'summary'=>"b_22",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"03"},{'category_sign'=>"economy",'name_ua'=>"Нафтова та газова промисловість",'name_ru'=>"Нефтяная и газовая промышленность",'file'=>"23",'summary'=>"b_23",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Вугільна та уранодобувна промисловість",'name_ru'=>"Угольная и уранодобувна промышленность",'file'=>"24",'summary'=>"b_24",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Електроенергетика",'name_ru'=>"Электроэнергетика",'file'=>"25",'summary'=>"b_25",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Чорна металургія",'name_ru'=>"Черная металлургия",'file'=>"26",'summary'=>"b_26",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Кольорова металургія",'name_ru'=>"Цветная металлургия",'file'=>"27",'summary'=>"b_27",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Машинобудування та металообробка",'name_ru'=>"Машиностроение и металлообработка",'file'=>"28",'summary'=>"b_28",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Хімічна промисловість",'name_ru'=>"Химическая промышленность",'file'=>"29",'summary'=>"b_29",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Текстильна промисловість",'name_ru'=>"Текстильная промышленность",'file'=>"30",'summary'=>"b_30",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Сільське господарство",'name_ru'=>"Сельское хозяйство",'file'=>"31",'summary'=>"b_31",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Зернові культури. Технічні (цукрові, бульбоплідні та тонізуючі) культури",'name_ru'=>"Зерновые культуры. Технические (сахарная, клубнеплодные и тонизирующие) культуры",'file'=>"32",'summary'=>"b_32",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Технічні (олійні та волокнисті) культури. Тваринництво",'name_ru'=>"Технические (масличные и волокнистые) культуры. Животноводство",'file'=>"33",'summary'=>"b_33",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Транспорт. Мережа міжнародного зв?язку",'name_ru'=>"Транспорт. Сеть международного н? Связи",'file'=>"34",'summary'=>"b_34",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"economy",'name_ua'=>"Міжнародні економічні зв?язки",'name_ru'=>"Международные экономические связи? Связки",'file'=>"35",'summary'=>"b_35",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"04"},{'category_sign'=>"problems",'name_ua'=>"Політична напруженість",'name_ru'=>"Политическая напряженность",'file'=>"36",'summary'=>"b_36",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ua'=>"Калорійність харчування. Охорона здоров?я",'name_ru'=>"Калорийность питания. Здравоохранение? Я",'file'=>"37",'summary'=>"b_37",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ua'=>"Екологічні проблеми",'name_ru'=>"Экологические проблемы",'file'=>"38",'summary'=>"b_38",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ua'=>"Охорона природи",'name_ru'=>"Охрана природы",'file'=>"39",'summary'=>"b_39",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ua'=>"Забруднення атмосферного повітря. Неграмотність",'name_ru'=>"Загрязнение атмосферного воздуха. Неграмотность",'file'=>"40",'summary'=>"b_40",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"05"},{'category_sign'=>"problems",'name_ua'=>"Освіта і наука",'name_ru'=>"Образование и наука",'file'=>"41",'summary'=>"b_41",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"05"},{'category_sign'=>"economic_maps",'name_ua'=>"Країни Європи",'name_ru'=>"Страны Европы",'file'=>"42",'summary'=>"b_42",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"06"},{'category_sign'=>"economic_maps",'name_ua'=>"Велика Британія, Франція, Італія, Бельгія, Швейцарія, Нідерланди, Люксембурґ",'name_ru'=>"Великобритания, Франция, Италия, Бельгия, Швейцария, Нидерланды, Люксембург",'file'=>"43",'summary'=>"b_43",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"06"},{'category_sign'=>"economic_maps",'name_ua'=>"Німеччина, Чехія, Словаччина, Польща,  Білорусь,  Литва",'name_ru'=>"Германия, Чехия, Словакия, Польша, Беларусь, Литва",'file'=>"44",'summary'=>"b_44",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"06"},{'category_sign'=>"economic_maps",'name_ua'=>"Росія",'name_ru'=>"Россия",'file'=>"45",'summary'=>"b_45",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"06"},{'category_sign'=>"economic_maps",'name_ua'=>"Країни Азії",'name_ru'=>"Страны Азии",'file'=>"46",'summary'=>"b_46",'legend'=>"Main",'pictures_list'=>"r_7",'questionnaire'=>"07"},{'category_sign'=>"economic_maps",'name_ua'=>"Китай, Монголія, Корея Північна, Корея Південна",'name_ru'=>"Китай, Монголия, Корея Северная, Корея Южная",'file'=>"47",'summary'=>"b_47",'legend'=>"Main",'pictures_list'=>"r_7",'questionnaire'=>"07"},{'category_sign'=>"economic_maps",'name_ua'=>"Індія, Банґладеш, Непал, Бутан. Японія",'name_ru'=>"Индия, Бангладеш, Непал, Бутан. Япония",'file'=>"48",'summary'=>"b_48",'legend'=>"Main",'pictures_list'=>"r_7",'questionnaire'=>"07"},{'category_sign'=>"economic_maps",'name_ua'=>"Канада, США",'name_ru'=>"Канада, США",'file'=>"49",'summary'=>"b_49",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"08"},{'category_sign'=>"economic_maps",'name_ua'=>"Латинська Америка",'name_ru'=>"Латинская Америка",'file'=>"50",'summary'=>"b_50",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"08"},{'category_sign'=>"economic_maps",'name_ua'=>"Африка",'name_ru'=>"Африка",'file'=>"51",'summary'=>"b_51",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"09"},{'category_sign'=>"economic_maps",'name_ua'=>"Австралія та Океанія",'name_ru'=>"Австралия и Океания",'file'=>"52",'summary'=>"b_52",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"09"}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
