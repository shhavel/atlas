require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"position",'name_ua'=>"Географічне положення",'name_en'=>"Geographical location",'name_ru'=>"Географическое положение",},{'sign'=>"weather",'name_ua'=>"Поверхня Києва. Погода",'name_en'=>"The surface of Kyiv. Weather",'name_ru'=>"Поверхность Киева. Погода",},{'sign'=>"florafauna",'name_ua'=>"Рослинність і тваринний світ",'name_en'=>"Flora and Fauna",'name_ru'=>"Растительность и животный мир",},{'sign'=>"population",'name_ua'=>"Населення. Історія та сучасність",'name_en'=>"Population. Past and Present",'name_ru'=>"Население. История и современность",},{'sign'=>"economics",'name_ua'=>"Господарська діяльність",'name_en'=>"Economic activity",'name_ru'=>"Хозяйственная деятельность",},{'sign'=>"past",'name_ua'=>"Київ у минулому",'name_en'=>"Kyiv last",'name_ru'=>"Киев в прошлом",}].each{|category| Category.create(category) }
      [{'category_sign'=>"position",'name_ua'=>"Світ",'name_en'=>"World",'name_ru'=>"Мир",'file'=>"GPWorld",'summary'=>"GPWorld",'pictures_list'=>"GP",'questionnaire'=>"GP",},{'category_sign'=>"position",'name_ua'=>"Європа. Україна. Околиці Києва",'name_en'=>"Europe. Ukraine. Neighborhoods Kyiv",'name_ru'=>"Европа. Украина. Окраины Киева",'file'=>"GPEurUA",'summary'=>"GPEurUA",'pictures_list'=>"GP",'questionnaire'=>"GP",},{'category_sign'=>"position",'name_ua'=>"Відстані від Києва до інших міст",'name_en'=>"Distances from Kyiv to other cities",'name_ru'=>"Расстояния от Киева в другие города",'file'=>"Europe",'pictures_list'=>"GP",'questionnaire'=>"GP",},{'category_sign'=>"weather",'name_ua'=>"Рельєф. Річки та озера",'name_en'=>"The relief. Rivers and Lakes",'name_ru'=>"Рельеф. Реки и озера",'file'=>"Rel0",'summary'=>"Rel",'pictures_list'=>"RelWeather",'questionnaire'=>"RelWeather",},{'category_sign'=>"weather",'name_ua'=>"Рельєф центру міста",'name_en'=>"Relief city center",'name_ru'=>"Рельеф центра города",'file'=>"Rel1",'summary'=>"Rel",'pictures_list'=>"RelWeather",'questionnaire'=>"RelWeather",},{'category_sign'=>"weather",'name_ua'=>"Водопостачання",'name_en'=>"Water supply",'name_ru'=>"Водоснабжение",'file'=>"WaterSupply",'summary'=>"WaterSupply",'pictures_list'=>"RelWeather",'questionnaire'=>"RelWeather",},{'category_sign'=>"weather",'name_ua'=>"Ґрунти",'name_en'=>"Soils",'name_ru'=>"Почвы",'file'=>"Soils",'summary'=>"Soils",'pictures_list'=>"RelWeather",'questionnaire'=>"RelWeather",},{'category_sign'=>"weather",'name_ua'=>"Пори року. Пункти спостереження за природою",'name_en'=>"Seasons. Items observing nature",'name_ru'=>"Времена года. Пункты наблюдения за природой",'file'=>"Weather",'summary'=>"Weather",'pictures_list'=>"RelWeather",'questionnaire'=>"RelWeather",},{'category_sign'=>"florafauna",'name_ua'=>"Рослинність і тваринний світ",'name_en'=>"Flora and Fauna",'name_ru'=>"Растительность и животный мир",'file'=>"PlantsAnimals",'summary'=>"PlantsAnimals",'pictures_list'=>"PlantsAnimals",'questionnaire'=>"PlantsAnimals",},{'category_sign'=>"florafauna",'name_ua'=>"Центральний ботанічний сад ім. М. Гришка",'name_en'=>"Central Botanical Garden. Mikhail Grishko",'name_ru'=>"Центральный ботанический сад им. Н. Гришко",'file'=>"BotHrishka",'summary'=>"BotHrishka",'pictures_list'=>"PlantsAnimals",'questionnaire'=>"PlantsAnimals",},{'category_sign'=>"florafauna",'name_ua'=>"Ботанічний сад ім. О. Фоміна",'name_en'=>"The botanical garden to him. A. Fomin",'name_ru'=>"Ботанический сад им. А. Фомина",'file'=>"BotFomina",'summary'=>"BotFomina",'pictures_list'=>"PlantsAnimals",'questionnaire'=>"PlantsAnimals",},{'category_sign'=>"florafauna",'name_ua'=>"Зоопарк",'name_en'=>"Zoo",'name_ru'=>"Зоопарк",'file'=>"Zoo",'summary'=>"Zoo",'pictures_list'=>"PlantsAnimals",'questionnaire'=>"PlantsAnimals",},{'category_sign'=>"florafauna",'name_ua'=>"Центральний парк культури та відпочинку",'name_en'=>"Central Park of Culture and Leisure",'name_ru'=>"Центральный парк культуры и отдыха",'file'=>"CultRest",'summary'=>"CultRest",'pictures_list'=>"PlantsAnimals",'questionnaire'=>"PlantsAnimals",},{'category_sign'=>"population",'name_ua'=>"Адміністративні райони",'name_en'=>"Administrative Region",'name_ru'=>"Административные районы",'file'=>"Admin",'summary'=>"Admin",'pictures_list'=>"Admin",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Історичні місцевості та зміни території",'name_en'=>"Historic areas and change area",'name_ru'=>"Исторические места и изменения территории",'file'=>"HistPlaces",'summary'=>"Population",'pictures_list'=>"Admin",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Зміни чисельності населення",'name_en'=>"Changes in population",'name_ru'=>"Изменения численности населения",'file'=>"Population",'summary'=>"Population",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Центр Києва",'name_en'=>"Kyiv Center",'name_ru'=>"Центр Киева",'file'=>"KievCenter",'summary'=>"KievCenter",'pictures_list'=>"KievCenter",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Заповідник «Софія Київська»",'name_en'=>"Reserve \"Sophia\"",'name_ru'=>"Заповедник «София Киевская»",'file'=>"Sofia",'summary'=>"Sofia",'pictures_list'=>"Sofia",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Визначні місця",'name_en'=>"Things to do",'name_ru'=>"Достопримечательности",'file'=>"Sights0",'summary'=>"Sights",'pictures_list'=>"Sights",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Визначні місця центру міста",'name_en'=>"Things to do downtown",'name_ru'=>"Достопримечательности центра города",'file'=>"Sights1",'summary'=>"Sights",'pictures_list'=>"Sights",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Музей народної архітектури та побуту України",'name_en'=>"Museum of Folk Architecture and Life of Ukraine",'name_ru'=>"Музей народной архитектуры и быта Украины",'file'=>"FolkArchMuseum",'summary'=>"FolkArchMuseum",'pictures_list'=>"FolkArchMuseum",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Києво-Печерська лавра. Заповідник і монастир",'name_en'=>"Kiev-Pechersk Lavra. Reserve and Monastery",'name_ru'=>"Киево-Печерская лавра. Заповедник и монастырь",'file'=>"Lavra",'summary'=>"Lavra",'pictures_list'=>"Lavra",'questionnaire'=>"Population",},{'category_sign'=>"population",'name_ua'=>"Видатні особи в Києві",'name_en'=>"Celebrities in Kiev",'name_ru'=>"Выдающиеся личности в Киеве",'file'=>"Famous",'summary'=>"Famous",'pictures_list'=>"Famous",'questionnaire'=>"Population",},{'category_sign'=>"economics",'name_ua'=>"Промисловість",'name_en'=>"Industry",'name_ru'=>"Промышленность",'file'=>"Industry",'summary'=>"Industry",'pictures_list'=>"Industry",'questionnaire'=>"Industry",},{'category_sign'=>"economics",'name_ua'=>"Електроенергетика",'name_en'=>"Power",'name_ru'=>"Электроэнергетика",'file'=>"PowerIndustry",'summary'=>"PowerIndustry",'pictures_list'=>"Industry",'questionnaire'=>"Industry",},{'category_sign'=>"economics",'name_ua'=>"Забруднення повітря",'name_en'=>"Air Pollution",'name_ru'=>"Загрязнение воздуха",'file'=>"Pollution",'summary'=>"Pollution",'pictures_list'=>"Industry",'questionnaire'=>"Industry",},{'category_sign'=>"economics",'name_ua'=>"Транспорт і зв'язок",'name_en'=>"Transport and communications",'name_ru'=>"Транспорт и связь",'file'=>"Transport",'summary'=>"Transport",'pictures_list'=>"Industry",'questionnaire'=>"Industry",},{'category_sign'=>"economics",'name_ua'=>"Транспорт у 1914 році",'name_en'=>"Vehicles in 1914",'name_ru'=>"Транспорт в 1914 году",'file'=>"Transport1914",'summary'=>"Transport1914",'pictures_list'=>"Transport1914",'questionnaire'=>"Transport1914",},{'category_sign'=>"economics",'name_ua'=>"Метрополітен",'name_en'=>"Subway",'name_ru'=>"Метрополитен",'file'=>"Metro",'summary'=>"Metro",'pictures_list'=>"Industry",'questionnaire'=>"Industry",},{'category_sign'=>"past",'name_ua'=>"Найдавніші поселення на території міста",'name_en'=>"The oldest settlement in the city",'name_ru'=>"Древнейшие поселения на территории города",'file'=>"Ancient",'summary'=>"Ancient",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",},{'category_sign'=>"past",'name_ua'=>"945 рік",'name_en'=>"945 year",'name_ru'=>"945 год",'file'=>"Kiev945",'summary'=>"Kiev945",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",},{'category_sign'=>"past",'name_ua'=>"1240 рік",'name_en'=>"In 1240",'name_ru'=>"1240",'file'=>"Kiev1240",'summary'=>"Kiev1240",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",},{'category_sign'=>"past",'name_ua'=>"1648 рік",'name_en'=>"In 1648",'name_ru'=>"1648",'file'=>"Kiev1648",'summary'=>"Kiev1648",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",},{'category_sign'=>"past",'name_ua'=>"1786 рік",'name_en'=>"In 1786",'name_ru'=>"1786",'file'=>"Kiev1786",'summary'=>"Kiev1786",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",},{'category_sign'=>"past",'name_ua'=>"1914 рік",'name_en'=>"In 1914",'name_ru'=>"1914",'file'=>"Kiev19140",'summary'=>"Kiev1914",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",},{'category_sign'=>"past",'name_ua'=>"1914 рік. Центр міста",'name_en'=>"1914. City Centre",'name_ru'=>"1914. Центр города",'file'=>"Kiev19141",'summary'=>"Kiev1914",'pictures_list'=>"KievHist",'questionnaire'=>"KievHist",}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
