require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"nature",'name_ua'=>"ЗАГАЛЬНІ ЗАКОНОМІРНОСТІ ПРИРОДИ ЗЕМЛІ",'name_ru'=>"ОБЩИЕ ЗАКОНОМЕРНОСТИ ПРИРОДЫ ЗЕМЛИ"},{'sign'=>"oceans",'name_ua'=>"ОКЕАНИ",'name_ru'=>"ОКЕАНЫ"},{'sign'=>"africa",'name_ua'=>"АФРИКА",'name_ru'=>"АФРИКА"},{'sign'=>"australia",'name_ua'=>"АВСТРАЛІЯ",'name_ru'=>"АВСТРАЛИЯ"},{'sign'=>"south_america",'name_ua'=>"ПІВДЕННА АМЕРИКА",'name_ru'=>"ЮЖНАЯ АМЕРИКА"},{'sign'=>"north_america",'name_ua'=>"ПІВНІЧНА АМЕРИКА",'name_ru'=>"СЕВЕРНАЯ АМЕРИКА"},{'sign'=>"antarctica",'name_ua'=>"АНТАРКТИДА",'name_ru'=>"АНТАРКТИДА"},{'sign'=>"eurasia",'name_ua'=>"ЄВРАЗІЯ",'name_ru'=>"ЕВРАЗИЯ"},{'sign'=>"our_home",'name_ua'=>"ЗЕМЛЯ – НАШ СПІЛЬНИЙ ДІМ",'name_ru'=>"ЗЕМЛЯ - НАШ ОБЩИЙ ДОМ"}].each{|category| Category.create(category) }
      [{'category_sign'=>"nature",'name_ua'=>"Годинні пояси",'name_ru'=>"Часовые пояса",'file'=>"r_1",'summary'=>"r_1",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"nature",'name_ua'=>"Фізична карта світу",'name_ru'=>"Физическая карта мира",'file'=>"r_2_3",'summary'=>"r_2",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"nature",'name_ua'=>"Будова земної кори",'name_ru'=>"Строение земной коры",'file'=>"r_4_5",'summary'=>"r_4",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"nature",'name_ua'=>"Кліматична карта світу",'name_ru'=>"Климатическая карта мира",'file'=>"r_7",'summary'=>"r_6",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"nature",'name_ua'=>"Кліматичні пояси та області світу",'name_ru'=>"Климатические пояса и области мира",'file'=>"r_8",'summary'=>"r_7",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"nature",'name_ua'=>"Ґрунти світу",'name_ru'=>"Почвы мира",'file'=>"r_9",'summary'=>"r_8",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"nature",'name_ua'=>"Географічні пояси та природні зони світу",'name_ru'=>"Географические пояса и природные зоны мира",'file'=>"r_10",'summary'=>"r_9",'legend'=>"Main",'pictures_list'=>"r_1",'questionnaire'=>"r_1"},{'category_sign'=>"oceans",'name_ua'=>"Тихий та Індійський. Температура та солоність води. Кліматичні пояси.",'name_ru'=>"Тихий и Индийский. Температура и соленость воды. Климатические пояса.",'file'=>"r_16_17",'summary'=>"r_10",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"r_2"},{'category_sign'=>"oceans",'name_ua'=>"Тихий та Індійський. Течії",'name_ru'=>"Тихий и Индийский. Течения",'file'=>"r_18-1",'summary'=>"r_10",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"r_2"},{'category_sign'=>"oceans",'name_ua'=>"Океанія. Держави та народи",'name_ru'=>"Океания. Государства и народы",'file'=>"r_18-2",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"r_2"},{'category_sign'=>"oceans",'name_ua'=>"Північний Льодовитий океан. Дослідження Арктики",'name_ru'=>"Северный Ледовитый океан. Исследования Арктики",'file'=>"r_19",'summary'=>"r_10-1",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"r_2"},{'category_sign'=>"oceans",'name_ua'=>"Атлантичний. Температура та солоність води.",'name_ru'=>"Атлантический. Температура и соленость воды.",'file'=>"r_20",'summary'=>"r_12",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"r_2"},{'category_sign'=>"oceans",'name_ua'=>"Атлантичний. Кліматичні пояси. Течії",'name_ru'=>"Атлантический. Климатические пояса. Течения",'file'=>"r_21",'summary'=>"r_12",'legend'=>"Main",'pictures_list'=>"r_2",'questionnaire'=>"r_2"},{'category_sign'=>"africa",'name_ua'=>"Фізична карта. Тектоніка",'name_ru'=>"Физическая карта. Тектоника",'file'=>"r_22",'summary'=>"r_20",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"r_3"},{'category_sign'=>"africa",'name_ua'=>"Клімат. Геологія",'name_ru'=>"Климат. Геология",'file'=>"r_23",'summary'=>"r_21",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"r_3"},{'category_sign'=>"africa",'name_ua'=>"Природні зони. Кліматичні пояси та області",'name_ru'=>"Природные зоны. Климатические пояса и области",'file'=>"r_24",'summary'=>"r_21-1",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"r_3"},{'category_sign'=>"africa",'name_ua'=>"Політична карта. Народи",'name_ru'=>"Политическая карта. Народы",'file'=>"r_25",'summary'=>"r_22",'legend'=>"Main",'pictures_list'=>"r_3",'questionnaire'=>"r_3"},{'category_sign'=>"australia",'name_ua'=>"Фізична карта",'name_ru'=>"Физическая карта",'file'=>"r_26-1",'summary'=>"r_24_1",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"r_4"},{'category_sign'=>"australia",'name_ua'=>"Тектоніка. Геологія",'name_ru'=>"Тектоника. Геология",'file'=>"r_26-2",'summary'=>"r_24_1",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"r_4"},{'category_sign'=>"australia",'name_ua'=>"Клімат. Кліматичні пояси та області",'name_ru'=>"Климат. Климатические пояса и области",'file'=>"r_27-1",'summary'=>"r_24_2",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"r_4"},{'category_sign'=>"australia",'name_ua'=>"Природні зони",'name_ru'=>"Природные зоны",'file'=>"r_27-2",'summary'=>"r_24_2-1",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"r_4"},{'category_sign'=>"australia",'name_ua'=>"Політична карта. Народи",'name_ru'=>"Политическая карта. Народы",'file'=>"r_28-1",'summary'=>"r_25",'legend'=>"Main",'pictures_list'=>"r_4",'questionnaire'=>"r_4"},{'category_sign'=>"south_america",'name_ua'=>"Фізична карта. Тектоніка",'name_ru'=>"Физическая карта. Тектоника",'file'=>"r_30",'summary'=>"r_26",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"r_5"},{'category_sign'=>"south_america",'name_ua'=>"Клімат. Геологія",'name_ru'=>"Климат. Геология",'file'=>"r_31",'summary'=>"r_27",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"r_5"},{'category_sign'=>"south_america",'name_ua'=>"Природні зони. Кліматичні пояси та області",'name_ru'=>"Природные зоны. Климатические пояса и области",'file'=>"r_32",'summary'=>"r_27-1",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"r_5"},{'category_sign'=>"south_america",'name_ua'=>"Політична карта. Народи",'name_ru'=>"Политическая карта. Народы",'file'=>"r_33",'summary'=>"r_28",'legend'=>"Main",'pictures_list'=>"r_5",'questionnaire'=>"r_5"},{'category_sign'=>"north_america",'name_ua'=>"Фізична карта. Тектоніка. Давнє материкове зледеніння",'name_ru'=>"Физическая карта. Тектоника. Давнее материковое обледенения",'file'=>"r_34",'summary'=>"r_30",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"r_6"},{'category_sign'=>"north_america",'name_ua'=>"Клімат. Геологія",'name_ru'=>"Климат. Геология",'file'=>"r_35",'summary'=>"r_31",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"r_6"},{'category_sign'=>"north_america",'name_ua'=>"Природні зони. Кліматичні пояси та області",'name_ru'=>"Природные зоны. Климатические пояса и области",'file'=>"r_36",'summary'=>"r_31-1",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"r_6"},{'category_sign'=>"north_america",'name_ua'=>"Політична карта. Народи",'name_ru'=>"Политическая карта. Народы",'file'=>"r_37",'summary'=>"r_32",'legend'=>"Main",'pictures_list'=>"r_6",'questionnaire'=>"r_6"},{'category_sign'=>"antarctica",'name_ua'=>"Фізична карта",'name_ru'=>"Физическая карта",'file'=>"r_29-1",'summary'=>"r_19_1",'legend'=>"Main",'pictures_list'=>"r_7",'questionnaire'=>"r_7"},{'category_sign'=>"antarctica",'name_ua'=>"Клімат. Підлідний рельєф",'name_ru'=>"Климат. Подледный рельеф",'file'=>"r_29-2",'summary'=>"r_19_2",'legend'=>"Main",'pictures_list'=>"r_7",'questionnaire'=>"r_7"},{'category_sign'=>"antarctica",'name_ua'=>"Південний океан. Дослідження Антарктиди",'name_ru'=>"Южный океан. Исследование Антарктиды",'file'=>"r_28-2",'legend'=>"Main",'pictures_list'=>"r_7",'questionnaire'=>"r_7"},{'category_sign'=>"eurasia",'name_ua'=>"Фізична карта. Давнє материкове зледеніння",'name_ru'=>"Физическая карта. Давнее материковое обледенения",'file'=>"r_38_39",'summary'=>"r_34",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Тектоніка",'name_ru'=>"Тектоника",'file'=>"r_40",'summary'=>"r_34",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Геологія",'name_ru'=>"Геология",'file'=>"r_41",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Клімат",'name_ru'=>"Климат",'file'=>"r_42",'summary'=>"r_35",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Кліматичні пояси та області",'name_ru'=>"Климатические пояса и области",'file'=>"r_43-1",'summary'=>"r_35",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Природні зони",'name_ru'=>"Природные зоны",'file'=>"r_44_45",'summary'=>"r_36",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Народи",'name_ru'=>"Народы",'file'=>"r_43-2",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"eurasia",'name_ua'=>"Політична карта",'name_ru'=>"Политическая карта",'file'=>"r_46_47",'summary'=>"r_37",'legend'=>"Main",'pictures_list'=>"r_8",'questionnaire'=>"r_8"},{'category_sign'=>"our_home",'name_ua'=>"Географічні подорожі та відкриття",'name_ru'=>"Географические путешествия и открытия",'file'=>"r_11",'summary'=>"r_13",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Політична карта світу",'name_ru'=>"Политическая карта мира",'file'=>"r_12_13",'summary'=>"r_14",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Розміщення населення",'name_ru'=>"Размещение населения",'file'=>"r_15",'summary'=>"r_16",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Народи світу",'name_ru'=>"Народы мира",'file'=>"r_14-1",'summary'=>"r_17",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Раси",'name_ru'=>"Расы",'file'=>"r_14-2",'summary'=>"r_18_1",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Релігії",'name_ru'=>"Религии",'file'=>"r_49",'summary'=>"r_18_2",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Глобальні екологічні проблеми",'name_ru'=>"Глобальные экологические проблемы",'file'=>"r_48-1",'summary'=>"r_41",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"},{'category_sign'=>"our_home",'name_ua'=>"Охорона природи",'name_ru'=>"Охрана природы",'file'=>"r_48-2",'legend'=>"Main",'pictures_list'=>"r_9",'questionnaire'=>"r_9"}].each{|map| Map.create(map) }
    end
    if Bill.find(:all).size == 0
      code = (0...6).map{(65 + rand(26)).chr }.join
      token =  (0...32).map.with_index{|i| ('a'..'z').to_a.concat(('0'..'9').to_a)[rand(36)] }.join
      Bill.create({'code' => code, 'token' => token, 'paid' => 0})
    end
    if Control.find(:all).size == 0
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => default_lang, 'type' => 'select', 'values_str' => '["ru","ua"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
