require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"ancients",'name_ua'=>"Життя прадавніх людей",'name_ru'=>"Жизнь древних"},{'sign'=>"east",'name_ua'=>"Давній Схід",'name_ru'=>"Древний Восток"},{'sign'=>"greece",'name_ua'=>"Давня Греція",'name_ru'=>"Древняя Греция"},{'sign'=>"rome",'name_ua'=>"Давній Рим",'name_ru'=>"Древний Рим"},{'sign'=>"ukrain",'name_ua'=>"Давня історія українських земель",'name_ru'=>"История украинских земель"}].each{|category| Category.create(category) }
      [{'category_sign'=>"ancients",'name_ua'=>"Виникнення людини та її розселення по Землі. Первісні землероби та скотарі",'name_ru'=>"Возникновение человека и его расселения по Земле. Первобытные земледельцы и скотоводы",'file'=>"1",'pictures_list'=>"1",'questionnaire'=>"1"},{'category_sign'=>"east",'name_ua'=>"Єгипет і Передня Азія в давнину (до кінця ІІ тис. до н. е.)",'name_ru'=>"Египет и Передняя Азия в древности (до конца II тыс. до н. Э)",'file'=>"2",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"east",'name_ua'=>"Стародавній Єгипет. Фінікія і Давньоєврейське царство у ХІІІ – VIII ст. до н. е.",'name_ru'=>"Древний Египет. Финикия и Древнееврейское царство в XIII - VIII вв. до н. е.",'file'=>"3",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"east",'name_ua'=>"Ассирія, Халдейське і Мідійське царства",'name_ru'=>"Ассирия, халдейские и Мидийского царства",'file'=>"4",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"east",'name_ua'=>"Перська держава",'name_ru'=>"Персидская держава",'file'=>"5",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"east",'name_ua'=>"Індія та Китай у ІІІ – ІІ тис. до н. е.",'name_ru'=>"Индия и Китай в III - II тыс. до н. е.",'file'=>"6",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"east",'name_ua'=>"Індія та Китай у І тис. до н. е. – ІІ ст. н. е.",'name_ru'=>"Индия и Китай в I тыс. до н. н.э. - II в. н. е.",'file'=>"7",'pictures_list'=>"2",'questionnaire'=>"2"},{'category_sign'=>"greece",'name_ua'=>"Греція у ІІ тис. до н. е., у ХІІ – VIII ст. до н. е.",'name_ru'=>"Греция во II тыс. до н. е., в XII - VIII вв. до н. е.",'file'=>"8",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Фінікійці та грецькі колонії ХІ – VІ ст. до н. е.",'name_ru'=>"Финикийцы и греческие колонии XI - VI вв. до н. е.",'file'=>"9",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Греко-перські війни 500 – 449 рр. до н. е.",'name_ru'=>"Греко-персидские войны 500 - 449 гг. е.",'file'=>"10",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Пелопоннеська війна 431 – 404 рр. до н. е.",'name_ru'=>"Пелопоннесская война 431 - 404 гг. е.",'file'=>"11",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Культура й господарство стародавньої Греції",'name_ru'=>"Культура и хозяйство древней Греции",'file'=>"12",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Піднесення Македонії (359 – 336 рр. до н. е.)",'name_ru'=>"Возвышение Македонии (359 - 336 гг. Н.э.)",'file'=>"13",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Утворення імперії Александра Македонського",'name_ru'=>"Образование империи Александра Македонского",'file'=>"14",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Розпад імперії Александра Македонського. Утворення елліністичних держав",'name_ru'=>"Распад империи Александра Македонского. Образование эллинистических государств",'file'=>"15",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"greece",'name_ua'=>"Елліністичний світ у ІІІ ст. до н. е.",'name_ru'=>"Эллинистический мир в III в. до н. е.",'file'=>"16",'pictures_list'=>"3",'questionnaire'=>"3"},{'category_sign'=>"rome",'name_ua'=>"Стародавня Італія",'name_ru'=>"Древняя Италия",'file'=>"17",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Народи і держави Європи IV – III ст. до н. е.",'name_ru'=>"Народы и государства Европы IV - III вв. до н. е.",'file'=>"18",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Пунічні війни ІІІ ст. до н. е.",'name_ru'=>"Пунические войны III ст. до н. е.",'file'=>"19",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Зростання території Римської республіки у ІІ ст. до н. е.",'name_ru'=>"Рост территории Римской республики во II в. до н. е.",'file'=>"20",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Римська республіка у І ст. до н. е. Громадянські війни",'name_ru'=>"Римская республика в I в. до н. э Гражданские войны",'file'=>"21",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Територіальне зростання Римської імперії",'name_ru'=>"Территориальный рост Римской империи",'file'=>"22",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Римська імперія у ІІ ст. н. е.",'name_ru'=>"Римская империя во II в. н. е.",'file'=>"23",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Виникнення і поширення християнства",'name_ru'=>"Возникновение и распространение христианства",'file'=>"24",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"rome",'name_ua'=>"Велике переселення народів. Загибель Західної Римської імперії",'name_ru'=>"Великое переселение народов. Гибель Западной Римской империи",'file'=>"25",'pictures_list'=>"4",'questionnaire'=>"4"},{'category_sign'=>"ukrain",'name_ua'=>"Найдавніше минуле України",'name_ru'=>"Древнейшее прошлое Украины",'file'=>"26",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"ukrain",'name_ua'=>"Перші землероби та скотарі на території України",'name_ru'=>"Первые земледельцы и скотоводы на территории Украины",'file'=>"27",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"ukrain",'name_ua'=>"Доба бронзи і раннього заліза на території України. Кіммерійці (друга половина ІІІ – початок І тис. до н. е.)",'name_ru'=>"Эпоха бронзы и раннего железа на территории Украины. Киммерийцы (вторая половина III - начало I тыс. до н. Э)",'file'=>"28",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"ukrain",'name_ua'=>"Світ кочовиків і світ цивілізацій",'name_ru'=>"Мир кочевников и мир цивилизаций",'file'=>"29",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"ukrain",'name_ua'=>"Велика Скіфія. Античні міста-держави в Північному Причорномор'ї",'name_ru'=>"Великая Скифия. Античные города-государства в Северном Причерноморье",'file'=>"30",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"ukrain",'name_ua'=>"Українські землі в ІІІ – І ст. до н. е. Сармати",'name_ru'=>"Украинские земли в III - I вв. до н. е. Сарматы",'file'=>"31",'pictures_list'=>"5",'questionnaire'=>"5"},{'category_sign'=>"ukrain",'name_ua'=>"Українські землі і велике переселення народів ІІ – V ст.",'name_ru'=>"Украинские земли и великое переселение народов II - V вв.",'file'=>"32",'pictures_list'=>"5",'questionnaire'=>"5"}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
