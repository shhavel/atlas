require 'rho/rhoapplication'

class AppApplication < Rho::RhoApplication
  def initialize
    if Category.find(:all).size == 0 || Map.find(:all).size == 0
      Rhom::Rhom.database_full_reset(false, true)
      # PLACEHOLDER: categories & maps, i.e. categories.each{|category| Category.create(category) }
      [{'sign'=>"introduction",'name_ua'=>"ВСТУП",'name_en'=>"INTRODUCTION",'name_ru'=>"ВВЕДЕНИЕ",},{'sign'=>"population",'name_ua'=>"НАСЕЛЕННЯ УКРАЇНИ",'name_en'=>"POPULATION OF UKRAINE",'name_ru'=>"НАСЕЛЕНИЯ УКРАИНЫ",},{'sign'=>"industry",'name_ua'=>"ГОСПОДАРСТВО ТА ПРОМИСЛОВІСТЬ",'name_en'=>"ECONOMY AND INDUSTRY",'name_ru'=>"ХОЗЯЙСТВО И ПРОМЫШЛЕННОСТЬ",},{'sign'=>"agriculture",'name_ua'=>"СІЛЬСЬКЕ ГОСПОДАРСТВО",'name_en'=>"AGRICULTURE",'name_ru'=>"СЕЛЬСКОЕ ХОЗЯЙСТВО",},{'sign'=>"social",'name_ua'=>"СОЦІАЛЬНА СФЕРА ТА ЗАБЕЗПЕЧЕННЯ",'name_en'=>"SOCIAL SPHERE AND SUPPORT",'name_ru'=>"СОЦИАЛЬНАЯ СФЕРА И ОБЕСПЕЧЕНИЕ",}].each{|category| Category.create(category) }
      [{'category_sign'=>"introduction",'name_ua'=>"Україна на карті Європи",'name_en'=>"Ukraine on the European map",'name_ru'=>"Украина на карте Европы",'file'=>"1",'summary'=>"01",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"introduction",'name_ua'=>"Фізична поверхня",'name_en'=>"Physical surface",'name_ru'=>"Физическая поверхность",'file'=>"2",'summary'=>"02",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"introduction",'name_ua'=>"Адміністративно-територіальний поділ",'name_en'=>"Subdivisions",'name_ru'=>"Административно-территориальное деление",'file'=>"3",'summary'=>"03",'legend'=>"Main",'pictures_list'=>"01",'questionnaire'=>"01",},{'category_sign'=>"population",'name_ua'=>"Розміщення населення",'name_en'=>"Placement of the population",'name_ru'=>"Размещение населения",'file'=>"4",'summary'=>"04",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Народжуваність, природний приріст, смертність населення. Міграції",'name_en'=>"Birth rate, natural growth, and mortality. Migration",'name_ru'=>"Рождаемость, естественный прирост, смертность населения. Миграции",'file'=>"5",'summary'=>"05",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Формування етнічної території",'name_en'=>"Formation of ethnic territory",'name_ru'=>"Формирование этнической территории",'file'=>"6",'summary'=>"06",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Етнічний склад населення",'name_en'=>"The ethnic composition of the population",'name_ru'=>"Этнический состав населения",'file'=>"7",'summary'=>"07",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Розміщення українців у світі",'name_en'=>"Placement of Ukrainian in the world",'name_ru'=>"Размещение украинского в мире",'file'=>"8",'summary'=>"08",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Релігія",'name_en'=>"Religion",'name_ru'=>"Религия",'file'=>"9",'summary'=>"09",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Вищі начальні заклади",'name_en'=>"Higher education institutions",'name_ru'=>"Высшие учебные заведения",'file'=>"10",'summary'=>"10",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Зайнятість. Безробіття",'name_en'=>"Employment. Unemployment",'name_ru'=>"Занятость. Безработица",'file'=>"11",'summary'=>"11",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"population",'name_ua'=>"Підготовка, підвищення кваліфікації кадрів",'name_en'=>"Training, skills development",'name_ru'=>"Подготовка, повышение квалификации кадров",'file'=>"12",'legend'=>"Main",'pictures_list'=>"02",'questionnaire'=>"02",},{'category_sign'=>"industry",'name_ua'=>"Господарство. Економічне районування",'name_en'=>"The economy. Economic regions",'name_ru'=>"Хозяйство. Экономическое районирование",'file'=>"13",'summary'=>"13",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Зовнішньоекономічна діяльність регіонів",'name_en'=>"Foreign economic activity regions",'name_ru'=>"Внешнеэкономическая деятельность регионов",'file'=>"14",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Мале підприємництво. Інвестиції",'name_en'=>"The small business. Investments",'name_ru'=>"Малое предпринимательство. Инвестиции",'file'=>"15",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Промисловість",'name_en'=>"Industry",'name_ru'=>"Промышленность",'file'=>"16",'summary'=>"15",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Паливна промисловість",'name_en'=>"Fuel industry",'name_ru'=>"Топливная промышленность",'file'=>"17",'summary'=>"16",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Електроенергетика",'name_en'=>"Power",'name_ru'=>"Электроэнергетика",'file'=>"18",'summary'=>"17",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Металургія",'name_en'=>"Metallurgy",'name_ru'=>"Металлургия",'file'=>"19",'summary'=>"18",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Машинобудування та металообробка",'name_en'=>"Oil and Gas",'name_ru'=>"Машиностроение и металлообработка",'file'=>"20",'summary'=>"19",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Хімічна та нафтохімічна промисловість",'name_en'=>"Chemical and petrochemical industry",'name_ru'=>"Химическая и нефтехимическая промышленность",'file'=>"21",'summary'=>"20",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Лісова, деревообробна та целюлозно-паперова промисловість",'name_en'=>"Timber, woodworking and pulp and paper industry",'name_ru'=>"Лесная, деревообрабатывающая и целлюлозно-бумажная промышленность",'file'=>"22",'summary'=>"21",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Промисловість будівельних матеріалів",'name_en'=>"Building materials industry",'name_ru'=>"Промышленность строительных материалов",'file'=>"23",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Легка промисловість",'name_en'=>"Light industry",'name_ru'=>"Легкая промышленность",'file'=>"24",'summary'=>"23",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Харчова промисловість",'name_en'=>"Food and Beverage",'name_ru'=>"Пищевая промышленность",'file'=>"25",'summary'=>"24",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Транспорт",'name_en'=>"Transport",'name_ru'=>"Транспорт",'file'=>"28",'summary'=>"27",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Рекреаційні ресурси",'name_en'=>"Recreational Resources",'name_ru'=>"Рекреационные ресурсы",'file'=>"29",'summary'=>"28",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"industry",'name_ua'=>"Зовнішні економічні зв‘язки України",'name_en'=>"External economic relations of Ukraine",'name_ru'=>"Внешние экономические связи Украины",'file'=>"30",'summary'=>"29",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"agriculture",'name_ua'=>"Посівні площі. Зернові культури",'name_en'=>"The area under cultivation. Cereals",'name_ru'=>"Посевные площади. Зерновые культуры",'file'=>"26_1",'summary'=>"25",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"agriculture",'name_ua'=>"Технічні культури. Картопля й овоче-баштанні культури",'name_en'=>"Industrial crops. Potatoes and vegetables and melons",'name_ru'=>"Технические. Картофель и овоще-бахчевые культуры",'file'=>"26_2",'summary'=>"25",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"agriculture",'name_ua'=>"Сільськогосподарські угіддя",'name_en'=>"Agricultural land",'name_ru'=>"Сельскохозяйственные угодья",'file'=>"26_3",'summary'=>"25",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"agriculture",'name_ua'=>"Тваринництво",'name_en'=>"Stockbreeding",'name_ru'=>"Животноводство",'file'=>"26_4",'summary'=>"25",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"agriculture",'name_ua'=>"Агропромисловий комплекс",'name_en'=>"Agriculture of",'name_ru'=>"Агропромышленный комплекс",'file'=>"26_5",'summary'=>"25",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"social",'name_ua'=>"Торгівля та побутові послуги. Охорона здоров'я",'name_en'=>"Trade and personal services. Healthcare",'name_ru'=>"Торговля и бытовые услуги. Здравоохранение",'file'=>"27_1",'summary'=>"26_1",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"social",'name_ua'=>"Культура та мистецтво",'name_en'=>"Art and Culture",'name_ru'=>"Культура и искусство",'file'=>"27_2",'summary'=>"26_2",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"social",'name_ua'=>"Оздоровчі заклади. Дитячий відпочинок",'name_en'=>"Health centers. Children's holiday",'name_ru'=>"Оздоровительные учреждения. Детский отдых",'file'=>"27_3",'summary'=>"26_3",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",},{'category_sign'=>"social",'name_ua'=>"Автомобілі. Доходи населення",'name_en'=>"Cars. Incomes",'name_ru'=>"Автомобили. Доходы населения",'file'=>"27_4",'summary'=>"26_4",'legend'=>"Main",'pictures_list'=>"03",'questionnaire'=>"03",}].each{|map| Map.create(map) }
    end
    if Control.find(:all).size == 0
      system_lang = nil
      if ['uk', 'ru', 'en'].include?(System.get_locale)
        system_lang = System.get_locale == 'uk' ? 'ua' : System.get_locale
      end
      # PLACEHOLDER: default_lang, e.g. default_lang = 'ru'
      default_lang = 'ua'
      Control.create({'name' => 'lang', 'value' => (system_lang || default_lang), 'type' => 'select', 'values_str' => '["ua","ru","en"]'})
      Control.create({'name' => 'icon_size', 'value' => (System::get_property('platform') == 'APPLE' ? 'small' : 'normal'), 'type' => 'select', 'values_str' => '["small","normal"]'})
      Control.create({'name' => 'zoom_step', 'value' => '70', 'type' => 'range', 'values_str' => '{"min":50,"max":100,"step":1}'})
      Control.create({'name' => 'show_controls_icon', 'value' => '1', 'type' => 'checkbox'})
    end

    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    @@toolbar = nil
    super

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end
